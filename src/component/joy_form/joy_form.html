<app-joy-form id="joy-form">
  <template shadowrootmode="open">
    <link rel="stylesheet" href="/assets/css/component/joy_form.css"/>

    <div class="progress-container">
      <div class="progress-bar" data-style:width="($currentStep / 3 * 100) + '%'"></div>
    </div>

    <!-- Start screen -->
    <section data-show="is('start')" class="start-screen">
      <article class="welcome-card">
        <h1>Ready to reflect?</h1>
        <p>Turn today's frustrations into tomorrow's connections</p>
        <button class="primary" data-on:click="next()">
          Start
        </button>
      </article>
    </section>

    <!-- Step 0 -->
    <section data-show="is('frustration')" class="question-section">
      <article class="question-card">
        <h2>Write about something that upset or annoyed you today</h2>
        <textarea
                data-bind="frustration"
                data-on:input="checkLength()"
                placeholder="What frustrated you?"
                id="frustration"
        ></textarea>
        <p class="character-count">
          <span data-text="$frustration.length"></span> / <span data-text="$MAX_LENGTH"></span> characters
        </p>
      </article>
    </section>

    <!-- Step 1 -->
    <section data-show="is('context')" class="question-section">
      <article class="question-card">
        <h2>What was the context? What were you doing?</h2>
        <textarea
                data-bind="context"
                data-on:input="checkLength()"
                placeholder="Describe the situation..."
                id="context"
        ></textarea>
        <p class="character-count">
          <span data-text="$context.length"></span> / <span data-text="$MAX_LENGTH"></span> characters
        </p>
      </article>
    </section>

    <!-- Step 2 (Final) -->
    <section data-show="is('joy')" class="question-section">
      <article class="question-card">
        <h2>What joy do you find in that context or activity?</h2>
        <textarea
                data-bind="joy"
                data-on:input="checkLength()"
                placeholder="Think about the positive side..."
                id="joy"
        ></textarea>
        <footer class="question-footer">
          <p class="character-count">
            <span data-text="$joy.length"></span> / <span data-text="$MAX_LENGTH"></span> characters
          </p>
          <button
                  data-show="$joy.length >= $MAX_LENGTH"
                  class="primary"
                  data-on:click="@post('/joy-form')"
          >
            Submit
          </button>
        </footer>
      </article>
    </section>
  </template>
</app-joy-form>
